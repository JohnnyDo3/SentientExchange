# ==========================================
# Sentient Exchange MCP Server Configuration
# x402 Payment Protocol with Multi-Provider Support
# ==========================================

# Network Configuration
NETWORK=devnet
# Options: devnet, mainnet-beta (for Solana)
#          base-sepolia, base (for EVM chains)

# Solana RPC URL (optional - uses public endpoints by default)
# SOLANA_RPC_URL=https://api.devnet.solana.com
# For better performance, use a private RPC:
# SOLANA_RPC_URL=https://your-quicknode-url.com

# Database Configuration
# ==========================================
# SQLite (Local Development):
DATABASE_PATH=./data/agentmarket.db
#
# PostgreSQL (Railway Production):
# DATABASE_URL=postgresql://user:password@host:port/database
# Railway automatically sets DATABASE_URL when you add the Postgres addon
# The Database class auto-detects the type:
# - If DATABASE_URL starts with "postgres://", uses PostgreSQL
# - Otherwise, uses SQLite with DATABASE_PATH

# Server Configuration
NODE_ENV=development
LOG_LEVEL=debug

# MCP Transport Mode
# ==========================================
# - stdio: Local communication (default for development)
# - sse: Remote communication via Server-Sent Events (for Railway/production)
# Auto-detected: stdio if running locally, sse if API_PORT is set
API_PORT=8081

# Production Environment Variables (Railway)
# Set these in Railway dashboard, not in .env file:
# - DATABASE_URL (auto-provided by Railway Postgres addon)
# - API_PORT=8081
# - ALLOWED_ORIGINS=https://your-domain.com,https://www.your-domain.com
# - JWT_SECRET=<generate with crypto.randomBytes(64).toString('hex')>

# ==========================================
# PAYMENT CONFIGURATION
# ==========================================

# Payment Mode
# - x402: Use x402 protocol with PayAI facilitator only
# - direct: Use direct Solana blockchain transactions only
# - hybrid: Try x402 first, fallback to direct (RECOMMENDED)
PAYMENT_MODE=hybrid

# PayAI Facilitator URL (for x402 protocol)
FACILITATOR_URL=https://facilitator.payai.network

# Maximum Payment Value (in token base units)
# Example: 100000000 = 100 USDC (6 decimals)
# MAX_PAYMENT_VALUE=100000000

# ==========================================
# WALLET CONFIGURATION (MCP CLIENT ONLY)
# ==========================================

# IMPORTANT: The MCP server does NOT need wallet keys!
# Users configure their wallets in their MCP CLIENT (e.g., Claude Desktop).
#
# Example MCP client configuration (~/.config/claude/config.json):
# {
#   "mcpServers": {
#     "agentmarket": {
#       "command": "node",
#       "args": ["path/to/dist/index.js"],
#       "env": {
#         "SOLANA_PRIVATE_KEY": "your-base58-private-key-here",
#         "NETWORK": "devnet"
#       }
#     }
#   }
# }
#
# To export private key from Phantom:
#  1. Open Phantom wallet
#  2. Settings â†’ Show Private Key
#  3. Copy base58 string
#
# SECURITY: Keys stay in MCP client environment, never transmitted to server!

# ==========================================
# SECURITY CONFIGURATION
# ==========================================

# JWT Secret for authentication tokens
# REQUIRED in production! Use a strong, randomly generated secret.
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
#
# CRITICAL SECURITY REQUIREMENTS:
# - Must be at least 64 characters long (128 recommended)
# - Use cryptographically random values in production
# - Never use the default/example value in production
# - Never commit production secrets to git
# - Rotate regularly (recommended: every 90 days)
# - Store in Railway secrets, not in code
#
# Example production secret (DO NOT USE - for reference only):
# JWT_SECRET=e33d60b1fe7708d84a6174c980f1792c4cb6c37a3392545895371dd483fda4eae95b0d8fb4cd1e46ad8f7e0fb5c7bb740baa820260571c2b68dc6a58148792f6

# ==========================================
# JWT KEYS FOR x402 MIDDLEWARE
# ==========================================
# RSA key pair for signing payment authorization JWTs
# Generate with: openssl genrsa -out private.key 2048 && openssl rsa -in private.key -pubout -out public.key
#
# SECURITY:
# - Private key MUST be kept secret (only on server)
# - Public key is embedded in @sentientexchange/x402-middleware npm package
# - Private key signs JWTs, public key verifies them
# - Never commit private key to git

# JWT_PRIVATE_KEY - Multi-line RSA private key
# Replace this with your generated private key (keep the line breaks as \n)
JWT_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\nYOUR_PRIVATE_KEY_HERE\n-----END RSA PRIVATE KEY-----"

# JWT_PUBLIC_KEY - Multi-line RSA public key
# This should match the public key embedded in the middleware package
JWT_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----\nYOUR_PUBLIC_KEY_HERE\n-----END PUBLIC KEY-----"

# Admin wallet addresses (comma-separated Solana addresses)
# These wallets can approve/reject pending services
ADMIN_WALLETS=

# ==========================================
# AI SERVICES CONFIGURATION
# ==========================================

# Anthropic API Key (for Image Analyzer, Text Summarizer, and AI Chat)
# Get your API key from: https://console.anthropic.com/
# REQUIRED for production use of AI services and web chat
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# Brave Search API Key (for AI web search capabilities)
# Get your API key from: https://brave.com/search/api/
# Free tier: 2,500 queries/month
# OPTIONAL - AI chat will work without it, but won't have web search
BRAVE_API_KEY=your_brave_api_key_here

# AI Service Pricing (in USDC)
IMAGE_ANALYZER_PRICE=0.02
SENTIMENT_ANALYZER_PRICE=0.01
TEXT_SUMMARIZER_PRICE=0.015

# AI Service Recipient Wallet Addresses (Solana)
# Use separate wallets for each service or the same wallet for all
# Falls back to RECIPIENT_WALLET_ADDRESS if not specified
IMAGE_ANALYZER_WALLET=
SENTIMENT_ANALYZER_WALLET=
TEXT_SUMMARIZER_WALLET=

# Main recipient wallet (fallback for all services)
RECIPIENT_WALLET_ADDRESS=your_solana_wallet_address_here

# Health Monitoring Configuration
HEALTH_CHECK_INTERVAL_MINUTES=5
