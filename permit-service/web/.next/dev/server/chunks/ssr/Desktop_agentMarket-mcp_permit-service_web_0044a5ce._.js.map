{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/johnn/Desktop/agentMarket-mcp/permit-service/web/lib/store.ts"],"sourcesContent":["import { create } from 'zustand'\nimport { persist } from 'zustand/middleware'\n\nexport type Message = {\n  id: string\n  role: 'user' | 'assistant'\n  content: string\n  timestamp: Date\n}\n\nexport type ProgressStep = {\n  id: string\n  label: string\n  status: 'completed' | 'current' | 'pending'\n}\n\nexport type PermitData = {\n  // Property Details\n  propertyAddress?: string\n  propertyCity?: string\n  propertyZip?: string\n  parcelNumber?: string\n\n  // Contractor Info\n  contractorName?: string\n  contractorLicense?: string\n  contractorPhone?: string\n  contractorEmail?: string\n\n  // Work Description\n  workType?: string\n  workDescription?: string\n  estimatedCost?: number\n\n  // Equipment Details\n  equipmentType?: string\n  equipmentBrand?: string\n  equipmentModel?: string\n  equipmentBTU?: number\n  equipmentSEER?: number\n  equipmentTonnage?: number\n\n  // Owner Info\n  ownerName?: string\n  ownerPhone?: string\n  ownerEmail?: string\n}\n\nexport type SavedSession = {\n  sessionId: string\n  messages: Message[]\n  permitData: PermitData\n  progress: ProgressStep[]\n  currentStep: number\n  selectedTier: 1 | 2 | null\n  lastUpdated: Date\n  propertyAddress?: string // For easy identification\n}\n\ntype ChatState = {\n  // Session\n  sessionId: string | null\n  isConnected: boolean\n\n  // Messages\n  messages: Message[]\n  isLoading: boolean\n\n  // Progress\n  progress: ProgressStep[]\n  currentStep: number\n\n  // Permit Data\n  permitData: PermitData\n\n  // Selected Tier\n  selectedTier: 1 | 2 | null\n\n  // Saved Sessions (for managing multiple permits)\n  savedSessions: SavedSession[]\n\n  // Actions\n  setSessionId: (id: string) => void\n  setConnected: (connected: boolean) => void\n  addMessage: (message: Omit<Message, 'id' | 'timestamp'>) => void\n  setLoading: (loading: boolean) => void\n  updateProgress: (stepId: string, status: ProgressStep['status']) => void\n  updatePermitData: (data: Partial<PermitData>) => void\n  setTier: (tier: 1 | 2) => void\n  saveCurrentSession: () => void\n  loadSession: (sessionId: string) => void\n  deleteSession: (sessionId: string) => void\n  resetChat: () => void\n}\n\nconst initialProgress: ProgressStep[] = [\n  { id: 'property', label: 'Property Details', status: 'current' },\n  { id: 'work', label: 'Work Description', status: 'pending' },\n  { id: 'contractor', label: 'Contractor Info', status: 'pending' },\n  { id: 'equipment', label: 'Equipment Details', status: 'pending' },\n  { id: 'review', label: 'Review & Pay', status: 'pending' },\n]\n\nconst initialMessages: Message[] = [\n  {\n    id: '1',\n    role: 'assistant',\n    content: \"Hey there! I'm here to help you get your HVAC permit sorted out. This should only take about 5 minutes.\\n\\nLet's start with the basics - what's the property address where you'll be doing the work?\",\n    timestamp: new Date(),\n  },\n]\n\nexport const useChatStore = create<ChatState>()(\n  persist(\n    (set, get) => ({\n      // Initial state\n      sessionId: null,\n      isConnected: false,\n      messages: initialMessages,\n      isLoading: false,\n      progress: initialProgress,\n      currentStep: 0,\n      permitData: {},\n      selectedTier: null,\n      savedSessions: [],\n\n      // Actions\n      setSessionId: (id) => set({ sessionId: id }),\n\n      setConnected: (connected) => set({ isConnected: connected }),\n\n      addMessage: (message) =>\n        set((state) => ({\n          messages: [\n            ...state.messages,\n            {\n              ...message,\n              id: Date.now().toString() + Math.random(),\n              timestamp: new Date(),\n            },\n          ],\n        })),\n\n      setLoading: (loading) => set({ isLoading: loading }),\n\n      updateProgress: (stepId, status) =>\n        set((state) => {\n          const newProgress = state.progress.map((step) =>\n            step.id === stepId ? { ...step, status } : step\n          )\n\n          // Update current step index\n          const currentStepIndex = newProgress.findIndex(\n            (step) => step.status === 'current'\n          )\n\n          return {\n            progress: newProgress,\n            currentStep: currentStepIndex,\n          }\n        }),\n\n      updatePermitData: (data) =>\n        set((state) => ({\n          permitData: { ...state.permitData, ...data },\n        })),\n\n      setTier: (tier) => set({ selectedTier: tier }),\n\n      saveCurrentSession: () => {\n        const state = get()\n        if (!state.sessionId) return\n\n        const savedSession: SavedSession = {\n          sessionId: state.sessionId,\n          messages: state.messages,\n          permitData: state.permitData,\n          progress: state.progress,\n          currentStep: state.currentStep,\n          selectedTier: state.selectedTier,\n          lastUpdated: new Date(),\n          propertyAddress: state.permitData.propertyAddress || 'Unnamed Application',\n        }\n\n        set((s) => ({\n          savedSessions: [\n            savedSession,\n            ...s.savedSessions.filter((session) => session.sessionId !== state.sessionId),\n          ].slice(0, 10), // Keep only 10 most recent\n        }))\n      },\n\n      loadSession: (sessionId) => {\n        const state = get()\n        const session = state.savedSessions.find((s) => s.sessionId === sessionId)\n\n        if (session) {\n          set({\n            sessionId: session.sessionId,\n            messages: session.messages,\n            permitData: session.permitData,\n            progress: session.progress,\n            currentStep: session.currentStep,\n            selectedTier: session.selectedTier,\n          })\n        }\n      },\n\n      deleteSession: (sessionId) => {\n        set((state) => ({\n          savedSessions: state.savedSessions.filter((s) => s.sessionId !== sessionId),\n        }))\n      },\n\n      resetChat: () =>\n        set({\n          sessionId: null,\n          isConnected: false,\n          messages: initialMessages,\n          isLoading: false,\n          progress: initialProgress,\n          currentStep: 0,\n          permitData: {},\n          selectedTier: null,\n        }),\n    }),\n    {\n      name: 'chat-storage',\n      // Persist everything so contractors can resume their work\n      partialize: (state) => ({\n        sessionId: state.sessionId,\n        messages: state.messages,\n        permitData: state.permitData,\n        selectedTier: state.selectedTier,\n        progress: state.progress,\n        currentStep: state.currentStep,\n        savedSessions: state.savedSessions,\n      }),\n    }\n  )\n)\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 165, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/johnn/Desktop/agentMarket-mcp/permit-service/web/lib/api.ts"],"sourcesContent":["import { PermitData } from './store'\n\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3010/api/v1'\n\nexport type ChatMessage = {\n  role: 'user' | 'assistant'\n  content: string\n}\n\nexport type ChatResponse = {\n  aiResponse: string  // Backend sends \"aiResponse\"\n  sessionId: string\n  isComplete: boolean\n  extractedData?: Partial<PermitData>\n  conversationState: string\n  missingFields: string[]\n  dataSummary: any\n}\n\nexport type PaymentIntentResponse = {\n  clientSecret: string\n  amountCents: number\n}\n\nexport type PackageResponse = {\n  token: string\n  expiresAt: string\n  previewUrl: string\n}\n\nexport type AccelaSubmissionResponse = {\n  success: boolean\n  recordId?: string\n  message: string\n}\n\n/**\n * Start or continue a chat session\n */\nexport async function sendChatMessage(\n  message: string,\n  sessionId?: string\n): Promise<ChatResponse> {\n  const response = await fetch(`${API_BASE_URL}/chat/message`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      message,\n      sessionId,\n    }),\n  })\n\n  if (!response.ok) {\n    throw new Error(`Chat request failed: ${response.statusText}`)\n  }\n\n  return response.json()\n}\n\n/**\n * Create a Stripe payment intent\n */\nexport async function createPaymentIntent(\n  tier: 1 | 2,\n  sessionId: string\n): Promise<PaymentIntentResponse> {\n  const response = await fetch(`${API_BASE_URL}/payments/create-intent`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      tier: `tier${tier}`, // Convert 1 â†’ \"tier1\", 2 â†’ \"tier2\"\n      sessionId,\n    }),\n  })\n\n  if (!response.ok) {\n    throw new Error(`Payment intent creation failed: ${response.statusText}`)\n  }\n\n  return response.json()\n}\n\n/**\n * Confirm payment completion (called after Stripe confirmPayment succeeds)\n */\nexport async function confirmPayment(\n  sessionId: string,\n  paymentIntentId: string,\n  tier: 1 | 2\n): Promise<{ success: boolean; sessionStatus: string }> {\n  const response = await fetch(`${API_BASE_URL}/payments/confirm`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      sessionId,\n      paymentIntentId,\n      tier: `tier${tier}`, // Convert 1 â†’ \"tier1\", 2 â†’ \"tier2\"\n    }),\n  })\n\n  if (!response.ok) {\n    throw new Error(`Payment confirmation failed: ${response.statusText}`)\n  }\n\n  return response.json()\n}\n\n/**\n * Check payment status for a session\n */\nexport async function checkPaymentStatus(\n  sessionId: string\n): Promise<{ sessionStatus: string; isPaid: boolean; hasSubmission: boolean; hasPdfPackage: boolean }> {\n  const response = await fetch(`${API_BASE_URL}/payments/status/${sessionId}`)\n\n  if (!response.ok) {\n    throw new Error(`Payment status check failed: ${response.statusText}`)\n  }\n\n  return response.json()\n}\n\n/**\n * Generate permit package (after payment)\n */\nexport async function generatePackage(\n  sessionId: string,\n  tier: 1 | 2\n): Promise<PackageResponse> {\n  const response = await fetch(`${API_BASE_URL}/generate-package`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      sessionId,\n      tier: `tier${tier}`, // Convert 1 â†’ \"tier1\", 2 â†’ \"tier2\"\n    }),\n  })\n\n  if (!response.ok) {\n    const errorData = await response.json()\n    const error: any = new Error(errorData.message || `Package generation failed: ${response.statusText}`)\n    error.missingFields = errorData.missingFields || []\n    error.details = errorData.details\n    throw error\n  }\n\n  return response.json()\n}\n\n/**\n * Submit to Accela (Tier 2 only, after approval)\n */\nexport async function submitToAccela(\n  token: string\n): Promise<AccelaSubmissionResponse> {\n  const response = await fetch(`${API_BASE_URL}/submit-to-accela`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      token,\n    }),\n  })\n\n  if (!response.ok) {\n    throw new Error(`Accela submission failed: ${response.statusText}`)\n  }\n\n  return response.json()\n}\n\n/**\n * Health check\n */\nexport async function checkHealth(): Promise<{ status: string }> {\n  const response = await fetch(`${API_BASE_URL}/health`)\n\n  if (!response.ok) {\n    throw new Error('Health check failed')\n  }\n\n  return response.json()\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 284, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/johnn/Desktop/agentMarket-mcp/permit-service/web/app/chat/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useRef, useEffect } from 'react'\nimport Link from 'next/link'\nimport { useRouter } from 'next/navigation'\nimport { useChatStore } from '@/lib/store'\nimport { sendChatMessage } from '@/lib/api'\n\nexport default function ChatPage() {\n  const router = useRouter()\n  const {\n    messages,\n    isLoading,\n    progress,\n    sessionId,\n    permitData,\n    addMessage,\n    setLoading,\n    setSessionId,\n    updateProgress,\n    updatePermitData,\n    saveCurrentSession,\n  } = useChatStore()\n\n  const [input, setInput] = useState('')\n  const [error, setError] = useState<string | null>(null)\n  const messagesEndRef = useRef<HTMLDivElement>(null)\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' })\n  }\n\n  useEffect(() => {\n    scrollToBottom()\n  }, [messages])\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    if (!input.trim() || isLoading) return\n\n    const userInput = input.trim()\n    setInput('')\n    setError(null)\n\n    // Add user message to chat\n    addMessage({\n      role: 'user',\n      content: userInput,\n    })\n\n    setLoading(true)\n\n    try {\n      // Send message to backend\n      const response = await sendChatMessage(userInput, sessionId || undefined)\n\n      // Save session ID if this is the first message\n      if (!sessionId && response.sessionId) {\n        setSessionId(response.sessionId)\n      }\n\n      // Add assistant response to chat\n      addMessage({\n        role: 'assistant',\n        content: response.aiResponse,\n      })\n\n      // Update permit data if extracted - transform nested structure to flat\n      if (response.extractedData) {\n        const extracted = response.extractedData\n        const flatData: any = {}\n\n        // Property details from permitInfo.location\n        if (extracted.permitInfo?.location) {\n          flatData.propertyAddress = extracted.permitInfo.location.address\n          flatData.propertyCity = extracted.permitInfo.location.city\n          flatData.propertyZip = extracted.permitInfo.location.zipCode\n        }\n\n        // Contractor info\n        if (extracted.contractor) {\n          flatData.contractorName = extracted.contractor.name\n          flatData.contractorLicense = extracted.contractor.licenseNumber\n          flatData.contractorPhone = extracted.contractor.phone\n          flatData.contractorEmail = extracted.contractor.email\n        }\n\n        // Owner info\n        if (extracted.property) {\n          flatData.ownerName = extracted.property.ownerName\n          flatData.ownerPhone = extracted.property.ownerPhone\n        }\n\n        // Equipment details\n        if (extracted.equipmentDetails) {\n          flatData.equipmentBrand = extracted.equipmentDetails.manufacturer\n          flatData.equipmentModel = extracted.equipmentDetails.model\n          flatData.equipmentSEER = extracted.equipmentDetails.seerRating\n        }\n\n        // Equipment type and tonnage from permitInfo\n        if (extracted.permitInfo) {\n          flatData.equipmentType = extracted.permitInfo.equipmentType\n          flatData.equipmentTonnage = extracted.permitInfo.tonnage\n          flatData.workType = extracted.permitInfo.jobType\n        }\n\n        // Installation cost\n        if (extracted.installation) {\n          flatData.estimatedCost = extracted.installation.estimatedCost\n        }\n\n        updatePermitData(flatData)\n\n        // Update progress based on ALL accumulated data (not just this response)\n        // Use a small delay to ensure state is updated\n        setTimeout(() => {\n          const currentState = useChatStore.getState()\n          const allData = currentState.permitData\n          const currentProgress = currentState.progress\n\n          // Check property details (address required)\n          if (allData.propertyAddress && currentProgress.find(s => s.id === 'property')?.status !== 'completed') {\n            updateProgress('property', 'completed')\n            if (currentProgress.find(s => s.id === 'work')?.status === 'pending') {\n              updateProgress('work', 'current')\n            }\n          }\n\n          // Check work description (workType required)\n          if (allData.workType && currentProgress.find(s => s.id === 'work')?.status !== 'completed') {\n            updateProgress('work', 'completed')\n            if (currentProgress.find(s => s.id === 'contractor')?.status === 'pending') {\n              updateProgress('contractor', 'current')\n            }\n          }\n\n          // Check contractor info (name and license required)\n          if (allData.contractorName && allData.contractorLicense && currentProgress.find(s => s.id === 'contractor')?.status !== 'completed') {\n            updateProgress('contractor', 'completed')\n            if (currentProgress.find(s => s.id === 'equipment')?.status === 'pending') {\n              updateProgress('equipment', 'current')\n            }\n          }\n\n          // Check equipment details (type and brand required)\n          if (allData.equipmentType && allData.equipmentBrand && currentProgress.find(s => s.id === 'equipment')?.status !== 'completed') {\n            updateProgress('equipment', 'completed')\n          }\n        }, 50)\n\n        // Auto-save session after updating data\n        setTimeout(() => saveCurrentSession(), 100)\n      }\n\n      // If chat is complete, show preparing message and redirect\n      if (response.isComplete) {\n        // Add \"preparing\" message\n        addMessage({\n          role: 'assistant',\n          content: \"Perfect! I have everything I need. Give me a moment while I prepare your application... ðŸ“‹\",\n        })\n\n        updateProgress('review', 'current')\n\n        // Wait 3 seconds so user can read the message\n        setTimeout(() => {\n          router.push('/review')\n        }, 3000)\n      }\n    } catch (err) {\n      console.error('Chat error:', err)\n      setError('Failed to send message. Please try again.')\n      addMessage({\n        role: 'assistant',\n        content: \"Sorry, I'm having trouble connecting right now. Please try again in a moment.\",\n      })\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex flex-col\">\n      {/* Top Bar */}\n      <div className=\"bg-white border-b border-gray-200 sticky top-0 z-10\">\n        <div className=\"container mx-auto px-4 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-3\">\n              <Link href=\"/\" className=\"text-navy-600 hover:text-navy-800\">\n                <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\n                </svg>\n              </Link>\n              <div>\n                <h1 className=\"text-lg font-bold text-navy-900\">HVAC Permit Application</h1>\n                <p className=\"text-sm text-gray-600\">Fill out your permit in plain English</p>\n              </div>\n            </div>\n            <div className=\"text-sm text-gray-600\">\n              <span className=\"hidden md:inline\">Session started: </span>\n              {new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"flex-1 container mx-auto px-4 py-6 flex gap-6\">\n        {/* Chat Area */}\n        <div className=\"flex-1 flex flex-col bg-white rounded-lg shadow-md overflow-hidden\">\n          {/* Messages */}\n          <div className=\"flex-1 overflow-y-auto p-6 space-y-4\">\n            {messages.map((message) => (\n              <div\n                key={message.id}\n                className={`flex ${message.role === 'user' ? 'justify-end' : 'justify-start'}`}\n              >\n                <div\n                  className={`max-w-[80%] rounded-lg p-4 ${\n                    message.role === 'user'\n                      ? 'bg-orange-600 text-white'\n                      : 'bg-gray-100 text-navy-900'\n                  }`}\n                >\n                  <div className=\"whitespace-pre-wrap\">{message.content}</div>\n                  <div\n                    className={`text-xs mt-2 ${\n                      message.role === 'user' ? 'text-orange-100' : 'text-gray-500'\n                    }`}\n                  >\n                    {new Date(message.timestamp).toLocaleTimeString([], {\n                      hour: '2-digit',\n                      minute: '2-digit',\n                    })}\n                  </div>\n                </div>\n              </div>\n            ))}\n            {isLoading && (\n              <div className=\"flex justify-start\">\n                <div className=\"bg-gray-100 text-navy-900 rounded-lg p-4\">\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0ms' }}></div>\n                    <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '150ms' }}></div>\n                    <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '300ms' }}></div>\n                  </div>\n                </div>\n              </div>\n            )}\n            <div ref={messagesEndRef} />\n          </div>\n\n          {/* Input Area */}\n          <div className=\"border-t border-gray-200 p-4 bg-gray-50\">\n            {error && (\n              <div className=\"mb-3 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700\">\n                {error}\n              </div>\n            )}\n            <form onSubmit={handleSubmit} className=\"flex gap-3\">\n              <input\n                type=\"text\"\n                value={input}\n                onChange={(e) => setInput(e.target.value)}\n                placeholder=\"Type your answer...\"\n                className=\"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\n                disabled={isLoading}\n              />\n              <button\n                type=\"submit\"\n                disabled={!input.trim() || isLoading}\n                className=\"px-6 py-3 bg-orange-600 text-white rounded-lg font-semibold hover:bg-orange-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors\"\n              >\n                Send\n              </button>\n            </form>\n            <div className=\"flex items-center justify-between mt-2\">\n              <p className=\"text-xs text-gray-500\">\n                Press Enter to send â€¢ Your data is encrypted and secure\n              </p>\n              {sessionId && (\n                <p className=\"text-xs text-green-600 flex items-center gap-1\">\n                  <span className=\"w-2 h-2 bg-green-600 rounded-full\"></span>\n                  Connected\n                </p>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Progress Sidebar - Desktop Only */}\n        <div className=\"hidden lg:block w-80\">\n          <div className=\"bg-white rounded-lg shadow-md p-6 sticky top-24\">\n            <h2 className=\"text-lg font-bold text-navy-900 mb-4\">Your Progress</h2>\n            <div className=\"space-y-4\">\n              {progress.map((step, index) => (\n                <div\n                  key={step.id}\n                  className={`flex items-start gap-3 ${\n                    step.id === 'review' && step.status === 'current'\n                      ? 'cursor-pointer hover:bg-gray-50 p-2 rounded-lg transition-colors -ml-2'\n                      : ''\n                  }`}\n                  onClick={() => {\n                    if (step.id === 'review' && step.status === 'current') {\n                      router.push('/review')\n                    }\n                  }}\n                >\n                  <div className=\"flex-shrink-0 mt-1\">\n                    {step.status === 'completed' ? (\n                      <div className=\"w-8 h-8 rounded-full bg-green-500 flex items-center justify-center\">\n                        <svg className=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                        </svg>\n                      </div>\n                    ) : step.status === 'current' ? (\n                      <div className=\"w-8 h-8 rounded-full bg-orange-600 flex items-center justify-center\">\n                        <span className=\"text-white font-bold text-sm\">{index + 1}</span>\n                      </div>\n                    ) : (\n                      <div className=\"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center\">\n                        <span className=\"text-gray-500 font-bold text-sm\">{index + 1}</span>\n                      </div>\n                    )}\n                  </div>\n                  <div className=\"flex-1\">\n                    <h3\n                      className={`font-semibold ${\n                        step.status === 'current'\n                          ? 'text-orange-600'\n                          : step.status === 'completed'\n                          ? 'text-green-600'\n                          : 'text-gray-500'\n                      }`}\n                    >\n                      {step.label}\n                    </h3>\n                    {step.status === 'current' && step.id === 'review' && (\n                      <p className=\"text-sm text-orange-600 mt-1 font-medium\">Click to continue â†’</p>\n                    )}\n                    {step.status === 'current' && step.id !== 'review' && (\n                      <p className=\"text-sm text-gray-600 mt-1\">In progress...</p>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            {/* Trust Signals */}\n            <div className=\"mt-8 pt-6 border-t border-gray-200\">\n              <div className=\"space-y-3 text-sm text-gray-600\">\n                <div className=\"flex items-center gap-2\">\n                  <svg className=\"w-5 h-5 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                  </svg>\n                  <span>Accela Certified</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <svg className=\"w-5 h-5 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n                  </svg>\n                  <span>Secure & Encrypted</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <svg className=\"w-5 h-5 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n                  </svg>\n                  <span>~5 minute process</span>\n                </div>\n              </div>\n            </div>\n\n            {/* Help */}\n            <div className=\"mt-6 p-4 bg-blue-50 rounded-lg\">\n              <p className=\"text-sm text-navy-900 font-semibold mb-1\">Need help?</p>\n              <p className=\"text-xs text-gray-600\">\n                You can save and return to this application anytime. Just bookmark this page.\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Mobile Progress Bar */}\n      <div className=\"lg:hidden bg-white border-t border-gray-200 p-4\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <span className=\"text-sm font-semibold text-navy-900\">Progress</span>\n          <span className=\"text-sm text-gray-600\">\n            Step {progress.findIndex((s) => s.status === 'current') + 1} of {progress.length}\n          </span>\n        </div>\n        <div className=\"flex gap-1\">\n          {progress.map((step) => (\n            <div\n              key={step.id}\n              className={`flex-1 h-2 rounded-full ${\n                step.status === 'completed'\n                  ? 'bg-green-500'\n                  : step.status === 'current'\n                  ? 'bg-orange-600'\n                  : 'bg-gray-200'\n              }`}\n            />\n          ))}\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1105, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/johnn/Desktop/agentMarket-mcp/permit-service/web/node_modules/zustand/esm/vanilla.mjs"],"sourcesContent":["const createStoreImpl = (createState) => {\n  let state;\n  const listeners = /* @__PURE__ */ new Set();\n  const setState = (partial, replace) => {\n    const nextState = typeof partial === \"function\" ? partial(state) : partial;\n    if (!Object.is(nextState, state)) {\n      const previousState = state;\n      state = (replace != null ? replace : typeof nextState !== \"object\" || nextState === null) ? nextState : Object.assign({}, state, nextState);\n      listeners.forEach((listener) => listener(state, previousState));\n    }\n  };\n  const getState = () => state;\n  const getInitialState = () => initialState;\n  const subscribe = (listener) => {\n    listeners.add(listener);\n    return () => listeners.delete(listener);\n  };\n  const api = { setState, getState, getInitialState, subscribe };\n  const initialState = state = createState(setState, getState, api);\n  return api;\n};\nconst createStore = ((createState) => createState ? createStoreImpl(createState) : createStoreImpl);\n\nexport { createStore };\n"],"names":[],"mappings":";;;;AAAA,MAAM,kBAAkB,CAAC;IACvB,IAAI;IACJ,MAAM,YAAY,aAAa,GAAG,IAAI;IACtC,MAAM,WAAW,CAAC,SAAS;QACzB,MAAM,YAAY,OAAO,YAAY,aAAa,QAAQ,SAAS;QACnE,IAAI,CAAC,OAAO,EAAE,CAAC,WAAW,QAAQ;YAChC,MAAM,gBAAgB;YACtB,QAAQ,CAAC,WAAW,OAAO,UAAU,OAAO,cAAc,YAAY,cAAc,IAAI,IAAI,YAAY,OAAO,MAAM,CAAC,CAAC,GAAG,OAAO;YACjI,UAAU,OAAO,CAAC,CAAC,WAAa,SAAS,OAAO;QAClD;IACF;IACA,MAAM,WAAW,IAAM;IACvB,MAAM,kBAAkB,IAAM;IAC9B,MAAM,YAAY,CAAC;QACjB,UAAU,GAAG,CAAC;QACd,OAAO,IAAM,UAAU,MAAM,CAAC;IAChC;IACA,MAAM,MAAM;QAAE;QAAU;QAAU;QAAiB;IAAU;IAC7D,MAAM,eAAe,QAAQ,YAAY,UAAU,UAAU;IAC7D,OAAO;AACT;AACA,MAAM,cAAe,CAAC,cAAgB,cAAc,gBAAgB,eAAe","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1141, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/johnn/Desktop/agentMarket-mcp/permit-service/web/node_modules/zustand/esm/react.mjs"],"sourcesContent":["import React from 'react';\nimport { createStore } from 'zustand/vanilla';\n\nconst identity = (arg) => arg;\nfunction useStore(api, selector = identity) {\n  const slice = React.useSyncExternalStore(\n    api.subscribe,\n    React.useCallback(() => selector(api.getState()), [api, selector]),\n    React.useCallback(() => selector(api.getInitialState()), [api, selector])\n  );\n  React.useDebugValue(slice);\n  return slice;\n}\nconst createImpl = (createState) => {\n  const api = createStore(createState);\n  const useBoundStore = (selector) => useStore(api, selector);\n  Object.assign(useBoundStore, api);\n  return useBoundStore;\n};\nconst create = ((createState) => createState ? createImpl(createState) : createImpl);\n\nexport { create, useStore };\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEA,MAAM,WAAW,CAAC,MAAQ;AAC1B,SAAS,SAAS,GAAG,EAAE,WAAW,QAAQ;IACxC,MAAM,QAAQ,6QAAK,CAAC,oBAAoB,CACtC,IAAI,SAAS,EACb,6QAAK,CAAC,WAAW,CAAC,IAAM,SAAS,IAAI,QAAQ,KAAK;QAAC;QAAK;KAAS,GACjE,6QAAK,CAAC,WAAW,CAAC,IAAM,SAAS,IAAI,eAAe,KAAK;QAAC;QAAK;KAAS;IAE1E,6QAAK,CAAC,aAAa,CAAC;IACpB,OAAO;AACT;AACA,MAAM,aAAa,CAAC;IAClB,MAAM,MAAM,IAAA,sNAAW,EAAC;IACxB,MAAM,gBAAgB,CAAC,WAAa,SAAS,KAAK;IAClD,OAAO,MAAM,CAAC,eAAe;IAC7B,OAAO;AACT;AACA,MAAM,SAAU,CAAC,cAAgB,cAAc,WAAW,eAAe","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1175, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/johnn/Desktop/agentMarket-mcp/permit-service/web/node_modules/zustand/esm/middleware.mjs"],"sourcesContent":["const reduxImpl = (reducer, initial) => (set, _get, api) => {\n  api.dispatch = (action) => {\n    set((state) => reducer(state, action), false, action);\n    return action;\n  };\n  api.dispatchFromDevtools = true;\n  return { dispatch: (...args) => api.dispatch(...args), ...initial };\n};\nconst redux = reduxImpl;\n\nconst trackedConnections = /* @__PURE__ */ new Map();\nconst getTrackedConnectionState = (name) => {\n  const api = trackedConnections.get(name);\n  if (!api) return {};\n  return Object.fromEntries(\n    Object.entries(api.stores).map(([key, api2]) => [key, api2.getState()])\n  );\n};\nconst extractConnectionInformation = (store, extensionConnector, options) => {\n  if (store === void 0) {\n    return {\n      type: \"untracked\",\n      connection: extensionConnector.connect(options)\n    };\n  }\n  const existingConnection = trackedConnections.get(options.name);\n  if (existingConnection) {\n    return { type: \"tracked\", store, ...existingConnection };\n  }\n  const newConnection = {\n    connection: extensionConnector.connect(options),\n    stores: {}\n  };\n  trackedConnections.set(options.name, newConnection);\n  return { type: \"tracked\", store, ...newConnection };\n};\nconst removeStoreFromTrackedConnections = (name, store) => {\n  if (store === void 0) return;\n  const connectionInfo = trackedConnections.get(name);\n  if (!connectionInfo) return;\n  delete connectionInfo.stores[store];\n  if (Object.keys(connectionInfo.stores).length === 0) {\n    trackedConnections.delete(name);\n  }\n};\nconst findCallerName = (stack) => {\n  var _a, _b;\n  if (!stack) return void 0;\n  const traceLines = stack.split(\"\\n\");\n  const apiSetStateLineIndex = traceLines.findIndex(\n    (traceLine) => traceLine.includes(\"api.setState\")\n  );\n  if (apiSetStateLineIndex < 0) return void 0;\n  const callerLine = ((_a = traceLines[apiSetStateLineIndex + 1]) == null ? void 0 : _a.trim()) || \"\";\n  return (_b = /.+ (.+) .+/.exec(callerLine)) == null ? void 0 : _b[1];\n};\nconst devtoolsImpl = (fn, devtoolsOptions = {}) => (set, get, api) => {\n  const { enabled, anonymousActionType, store, ...options } = devtoolsOptions;\n  let extensionConnector;\n  try {\n    extensionConnector = (enabled != null ? enabled : (import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") && window.__REDUX_DEVTOOLS_EXTENSION__;\n  } catch (e) {\n  }\n  if (!extensionConnector) {\n    return fn(set, get, api);\n  }\n  const { connection, ...connectionInformation } = extractConnectionInformation(store, extensionConnector, options);\n  let isRecording = true;\n  api.setState = ((state, replace, nameOrAction) => {\n    const r = set(state, replace);\n    if (!isRecording) return r;\n    const action = nameOrAction === void 0 ? {\n      type: anonymousActionType || findCallerName(new Error().stack) || \"anonymous\"\n    } : typeof nameOrAction === \"string\" ? { type: nameOrAction } : nameOrAction;\n    if (store === void 0) {\n      connection == null ? void 0 : connection.send(action, get());\n      return r;\n    }\n    connection == null ? void 0 : connection.send(\n      {\n        ...action,\n        type: `${store}/${action.type}`\n      },\n      {\n        ...getTrackedConnectionState(options.name),\n        [store]: api.getState()\n      }\n    );\n    return r;\n  });\n  api.devtools = {\n    cleanup: () => {\n      if (connection && typeof connection.unsubscribe === \"function\") {\n        connection.unsubscribe();\n      }\n      removeStoreFromTrackedConnections(options.name, store);\n    }\n  };\n  const setStateFromDevtools = (...a) => {\n    const originalIsRecording = isRecording;\n    isRecording = false;\n    set(...a);\n    isRecording = originalIsRecording;\n  };\n  const initialState = fn(api.setState, get, api);\n  if (connectionInformation.type === \"untracked\") {\n    connection == null ? void 0 : connection.init(initialState);\n  } else {\n    connectionInformation.stores[connectionInformation.store] = api;\n    connection == null ? void 0 : connection.init(\n      Object.fromEntries(\n        Object.entries(connectionInformation.stores).map(([key, store2]) => [\n          key,\n          key === connectionInformation.store ? initialState : store2.getState()\n        ])\n      )\n    );\n  }\n  if (api.dispatchFromDevtools && typeof api.dispatch === \"function\") {\n    let didWarnAboutReservedActionType = false;\n    const originalDispatch = api.dispatch;\n    api.dispatch = (...args) => {\n      if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && args[0].type === \"__setState\" && !didWarnAboutReservedActionType) {\n        console.warn(\n          '[zustand devtools middleware] \"__setState\" action type is reserved to set state from the devtools. Avoid using it.'\n        );\n        didWarnAboutReservedActionType = true;\n      }\n      originalDispatch(...args);\n    };\n  }\n  connection.subscribe((message) => {\n    var _a;\n    switch (message.type) {\n      case \"ACTION\":\n        if (typeof message.payload !== \"string\") {\n          console.error(\n            \"[zustand devtools middleware] Unsupported action format\"\n          );\n          return;\n        }\n        return parseJsonThen(\n          message.payload,\n          (action) => {\n            if (action.type === \"__setState\") {\n              if (store === void 0) {\n                setStateFromDevtools(action.state);\n                return;\n              }\n              if (Object.keys(action.state).length !== 1) {\n                console.error(\n                  `\n                    [zustand devtools middleware] Unsupported __setState action format.\n                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { \"type\": \"__setState\", \"state\": { \"abc123Store\": { \"foo\": \"bar\" } } }\n                    `\n                );\n              }\n              const stateFromDevtools = action.state[store];\n              if (stateFromDevtools === void 0 || stateFromDevtools === null) {\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(stateFromDevtools)) {\n                setStateFromDevtools(stateFromDevtools);\n              }\n              return;\n            }\n            if (!api.dispatchFromDevtools) return;\n            if (typeof api.dispatch !== \"function\") return;\n            api.dispatch(action);\n          }\n        );\n      case \"DISPATCH\":\n        switch (message.payload.type) {\n          case \"RESET\":\n            setStateFromDevtools(initialState);\n            if (store === void 0) {\n              return connection == null ? void 0 : connection.init(api.getState());\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"COMMIT\":\n            if (store === void 0) {\n              connection == null ? void 0 : connection.init(api.getState());\n              return;\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"ROLLBACK\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                connection == null ? void 0 : connection.init(api.getState());\n                return;\n              }\n              setStateFromDevtools(state[store]);\n              connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n            });\n          case \"JUMP_TO_STATE\":\n          case \"JUMP_TO_ACTION\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(state[store])) {\n                setStateFromDevtools(state[store]);\n              }\n            });\n          case \"IMPORT_STATE\": {\n            const { nextLiftedState } = message.payload;\n            const lastComputedState = (_a = nextLiftedState.computedStates.slice(-1)[0]) == null ? void 0 : _a.state;\n            if (!lastComputedState) return;\n            if (store === void 0) {\n              setStateFromDevtools(lastComputedState);\n            } else {\n              setStateFromDevtools(lastComputedState[store]);\n            }\n            connection == null ? void 0 : connection.send(\n              null,\n              // FIXME no-any\n              nextLiftedState\n            );\n            return;\n          }\n          case \"PAUSE_RECORDING\":\n            return isRecording = !isRecording;\n        }\n        return;\n    }\n  });\n  return initialState;\n};\nconst devtools = devtoolsImpl;\nconst parseJsonThen = (stringified, fn) => {\n  let parsed;\n  try {\n    parsed = JSON.parse(stringified);\n  } catch (e) {\n    console.error(\n      \"[zustand devtools middleware] Could not parse the received json\",\n      e\n    );\n  }\n  if (parsed !== void 0) fn(parsed);\n};\n\nconst subscribeWithSelectorImpl = (fn) => (set, get, api) => {\n  const origSubscribe = api.subscribe;\n  api.subscribe = ((selector, optListener, options) => {\n    let listener = selector;\n    if (optListener) {\n      const equalityFn = (options == null ? void 0 : options.equalityFn) || Object.is;\n      let currentSlice = selector(api.getState());\n      listener = (state) => {\n        const nextSlice = selector(state);\n        if (!equalityFn(currentSlice, nextSlice)) {\n          const previousSlice = currentSlice;\n          optListener(currentSlice = nextSlice, previousSlice);\n        }\n      };\n      if (options == null ? void 0 : options.fireImmediately) {\n        optListener(currentSlice, currentSlice);\n      }\n    }\n    return origSubscribe(listener);\n  });\n  const initialState = fn(set, get, api);\n  return initialState;\n};\nconst subscribeWithSelector = subscribeWithSelectorImpl;\n\nfunction combine(initialState, create) {\n  return (...args) => Object.assign({}, initialState, create(...args));\n}\n\nfunction createJSONStorage(getStorage, options) {\n  let storage;\n  try {\n    storage = getStorage();\n  } catch (e) {\n    return;\n  }\n  const persistStorage = {\n    getItem: (name) => {\n      var _a;\n      const parse = (str2) => {\n        if (str2 === null) {\n          return null;\n        }\n        return JSON.parse(str2, options == null ? void 0 : options.reviver);\n      };\n      const str = (_a = storage.getItem(name)) != null ? _a : null;\n      if (str instanceof Promise) {\n        return str.then(parse);\n      }\n      return parse(str);\n    },\n    setItem: (name, newValue) => storage.setItem(name, JSON.stringify(newValue, options == null ? void 0 : options.replacer)),\n    removeItem: (name) => storage.removeItem(name)\n  };\n  return persistStorage;\n}\nconst toThenable = (fn) => (input) => {\n  try {\n    const result = fn(input);\n    if (result instanceof Promise) {\n      return result;\n    }\n    return {\n      then(onFulfilled) {\n        return toThenable(onFulfilled)(result);\n      },\n      catch(_onRejected) {\n        return this;\n      }\n    };\n  } catch (e) {\n    return {\n      then(_onFulfilled) {\n        return this;\n      },\n      catch(onRejected) {\n        return toThenable(onRejected)(e);\n      }\n    };\n  }\n};\nconst persistImpl = (config, baseOptions) => (set, get, api) => {\n  let options = {\n    storage: createJSONStorage(() => localStorage),\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => ({\n      ...currentState,\n      ...persistedState\n    }),\n    ...baseOptions\n  };\n  let hasHydrated = false;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage = options.storage;\n  if (!storage) {\n    return config(\n      (...args) => {\n        console.warn(\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\n        );\n        set(...args);\n      },\n      get,\n      api\n    );\n  }\n  const setItem = () => {\n    const state = options.partialize({ ...get() });\n    return storage.setItem(options.name, {\n      state,\n      version: options.version\n    });\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    return setItem();\n  };\n  const configResult = config(\n    (...args) => {\n      set(...args);\n      return setItem();\n    },\n    get,\n    api\n  );\n  api.getInitialState = () => configResult;\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a, _b;\n    if (!storage) return;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => {\n      var _a2;\n      return cb((_a2 = get()) != null ? _a2 : configResult);\n    });\n    const postRehydrationCallback = ((_b = options.onRehydrateStorage) == null ? void 0 : _b.call(options, (_a = get()) != null ? _a : configResult)) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            const migration = options.migrate(\n              deserializedStorageValue.state,\n              deserializedStorageValue.version\n            );\n            if (migration instanceof Promise) {\n              return migration.then((result) => [true, result]);\n            }\n            return [true, migration];\n          }\n          console.error(\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\n          );\n        } else {\n          return [false, deserializedStorageValue.state];\n        }\n      }\n      return [false, void 0];\n    }).then((migrationResult) => {\n      var _a2;\n      const [migrated, migratedState] = migrationResult;\n      stateFromStorage = options.merge(\n        migratedState,\n        (_a2 = get()) != null ? _a2 : configResult\n      );\n      set(stateFromStorage, true);\n      if (migrated) {\n        return setItem();\n      }\n    }).then(() => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      stateFromStorage = get();\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = {\n        ...options,\n        ...newOptions\n      };\n      if (newOptions.storage) {\n        storage = newOptions.storage;\n      }\n    },\n    clearStorage: () => {\n      storage == null ? void 0 : storage.removeItem(options.name);\n    },\n    getOptions: () => options,\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  if (!options.skipHydration) {\n    hydrate();\n  }\n  return stateFromStorage || configResult;\n};\nconst persist = persistImpl;\n\nexport { combine, createJSONStorage, devtools, persist, redux, subscribeWithSelector };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}}]
}